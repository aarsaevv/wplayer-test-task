(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();function e(e){return e||=new Map,{all:e,on(t,n){let r=e.get(t);r?r.push(n):e.set(t,[n])},off(t,n){let r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit(t,n){let r=e.get(t);r&&r.slice().map(e=>{e(n)}),r=e.get(`*`),r&&r.slice().map(e=>{e(t,n)})}}}var t=class{videoEl;emitter=e();eventHandlers=null;get buffer(){return{length:0}}attachMedia(e){this.videoEl=e}detachMedia(){this.videoEl=void 0}emit(e){this.emitter.emit(`playbackEvent`,e)}};let n=function(e){return e.IDLE=`IDLE`,e.LOADING=`LOADING`,e.READY=`READY`,e.PLAYING=`PLAYING`,e.PAUSED=`PAUSED`,e.SEEKING=`SEEKING`,e.BUFFERING=`BUFFERING`,e.ENDED=`ENDED`,e.TIMEUPDATE=`TIMEUPDATE`,e}({});async function r(e){try{let t=(await fetch(e,{method:`HEAD`})).headers.get(`Content-Type`)??``;return t.startsWith(`video/`)||e.endsWith(`.mp4`)?`native`:t.includes(`application/dash+xml`)||e.endsWith(`.mpd`)?`dash`:t.includes(`application/x-mpegURL`)||e.endsWith(`.m3u8`)?`hls`:`unknown`}catch{return e.endsWith(`.mp4`)?`native`:e.endsWith(`.mpd`)?`dash`:e.endsWith(`.m3u8`)?`hls`:`unknown`}}function i(e,t){let n,r;return function(){let i=arguments,a=this;return n||(n=!0,window.setTimeout(()=>n=!1,t),r=e.apply(a,i)),r}}function a(){return dashjs.MediaPlayer().create()}let o=function(e){return e.MANIFEST_LOADING_STARTED=`manifestLoadingStarted`,e.CAN_PLAY=`canPlay`,e.PLAYBACK_PLAYING=`playbackPlaying`,e.PLAYBACK_PAUSED=`playbackPaused`,e.PLAYBACK_SEEKING=`playbackSeeking`,e.FRAGMENT_LOADING_STARTED=`fragmentLoadingStarted`,e.PLAYBACK_ENDED=`playbackEnded`,e.PLAYBACK_TIME_UPDATED=`playbackTimeUpdated`,e}({});var s=class extends t{tech;get buffer(){return{length:this.tech.getBufferLength(`video`)}}init(){this.tech=a()}destroy(){this.unregisterListeners(),this.tech.destroy(),this.detachMedia()}load(e){this.tech.initialize(this.videoEl,e),this.registerListeners()}play(){return this.tech.play()}pause(){return this.tech.pause()}seekTo(){throw Error(`Method not implemented.`)}registerListeners(){this.eventHandlers={onManifestLoadingStarted:()=>{this.emit(n.LOADING)},onCanPlay:()=>{this.emit(n.READY)},onPlaybackPlaying:()=>{this.emit(n.PLAYING)},onPlaybackPaused:()=>{this.emit(n.PAUSED)},onPlaybackSeeking:()=>{this.emit(n.SEEKING)},onFragmentLoadingStarted:()=>{this.emit(n.BUFFERING)},onPlaybackEnded:()=>{this.emit(n.ENDED)},onPlaybackTimeUpdated:()=>{this.emit(n.TIMEUPDATE)}},this.tech.on(o.MANIFEST_LOADING_STARTED,this.eventHandlers.onManifestLoadingStarted),this.tech.on(o.CAN_PLAY,this.eventHandlers.onCanPlay),this.tech.on(o.PLAYBACK_PLAYING,this.eventHandlers.onPlaybackPlaying),this.tech.on(o.PLAYBACK_PAUSED,this.eventHandlers.onPlaybackPaused),this.tech.on(o.PLAYBACK_SEEKING,this.eventHandlers.onPlaybackSeeking),this.tech.on(o.FRAGMENT_LOADING_STARTED,this.eventHandlers.onFragmentLoadingStarted),this.tech.on(o.PLAYBACK_ENDED,this.eventHandlers.onPlaybackEnded),this.tech.on(o.PLAYBACK_TIME_UPDATED,this.eventHandlers.onPlaybackTimeUpdated)}unregisterListeners(){this.eventHandlers&&=(this.tech.off(o.MANIFEST_LOADING_STARTED,this.eventHandlers.onManifestLoadingStarted),this.tech.off(o.CAN_PLAY,this.eventHandlers.onCanPlay),this.tech.off(o.PLAYBACK_PLAYING,this.eventHandlers.onPlaybackPlaying),this.tech.off(o.PLAYBACK_PAUSED,this.eventHandlers.onPlaybackPaused),this.tech.off(o.PLAYBACK_SEEKING,this.eventHandlers.onPlaybackSeeking),this.tech.off(o.FRAGMENT_LOADING_STARTED,this.eventHandlers.onFragmentLoadingStarted),this.tech.off(o.PLAYBACK_ENDED,this.eventHandlers.onPlaybackEnded),this.tech.off(o.PLAYBACK_TIME_UPDATED,this.eventHandlers.onPlaybackTimeUpdated),null)}},c=class extends Error{constructor(e){super(`Unexpected state of the element: ${e}`),this.name=`UnexpectedElementStateError`}};function l(){return new Hls}let u=function(e){return e.MANIFEST_LOADING=`hlsManifestLoading`,e.MANIFEST_PARSED=`hlsManifestParsed`,e.FRAG_LOADING=`hlsFragLoading`,e.PLAYING=`playing`,e.PAUSE=`pause`,e.SEEKING=`seeking`,e.ENDED=`ended`,e.TIMEUPDATE=`timeupdate`,e}({});var d=class extends t{tech;get buffer(){return{length:this.tech.mainForwardBufferInfo.len}}init(){this.tech=l()}destroy(){this.unregisterListeners(),this.tech.stopLoad(),this.tech.detachMedia(),this.tech.destroy(),this.detachMedia()}load(e){if(!this.videoEl)throw new c(`videoEl`);this.tech.loadSource(e),super.attachMedia(this.videoEl),this.tech.attachMedia(this.videoEl),this.registerListeners()}play(){if(!this.videoEl)throw new c(`videoEl`);return this.videoEl.play()}pause(){if(!this.videoEl)throw new c(`videoEl`);return this.videoEl.pause()}seekTo(){throw Error(`Method not implemented.`)}registerListeners(){if(!this.videoEl)throw new c(`videoEl`);this.eventHandlers={onManifestLoading:()=>{this.emit(n.LOADING)},onManifestParsed:()=>{this.emit(n.READY)},onFragLoading:()=>{this.emit(n.BUFFERING)},onPlaying:()=>{this.emit(n.PLAYING)},onPause:()=>{this.emit(n.PAUSED)},onSeeking:()=>{this.emit(n.SEEKING)},onEnded:()=>{this.emit(n.ENDED)},onTimeupdate:()=>{this.emit(n.TIMEUPDATE)}},this.tech.on(u.MANIFEST_LOADING,this.eventHandlers.onManifestLoading),this.tech.on(u.MANIFEST_PARSED,this.eventHandlers.onManifestParsed),this.tech.on(u.FRAG_LOADING,this.eventHandlers.onFragLoading),this.videoEl.addEventListener(u.PLAYING,this.eventHandlers.onPlaying),this.videoEl.addEventListener(u.PAUSE,this.eventHandlers.onPause),this.videoEl.addEventListener(u.SEEKING,this.eventHandlers.onSeeking),this.videoEl.addEventListener(u.ENDED,this.eventHandlers.onEnded),this.videoEl.addEventListener(u.TIMEUPDATE,this.eventHandlers.onTimeupdate)}unregisterListeners(){!this.videoEl||!this.eventHandlers||(this.tech.off(u.MANIFEST_LOADING,this.eventHandlers.onManifestLoading),this.tech.off(u.MANIFEST_PARSED,this.eventHandlers.onManifestParsed),this.tech.off(u.FRAG_LOADING,this.eventHandlers.onFragLoading),this.videoEl.removeEventListener(u.PLAYING,this.eventHandlers.onPlaying),this.videoEl.removeEventListener(u.PAUSE,this.eventHandlers.onPause),this.videoEl.removeEventListener(u.SEEKING,this.eventHandlers.onSeeking),this.videoEl.removeEventListener(u.ENDED,this.eventHandlers.onEnded),this.videoEl.removeEventListener(u.TIMEUPDATE,this.eventHandlers.onTimeupdate),this.eventHandlers=null)}};let f=function(e){return e.LOADSTART=`loadstart`,e.CANPLAY=`canplay`,e.PLAYING=`playing`,e.PAUSE=`pause`,e.SEEKING=`seeking`,e.WAITING=`waiting`,e.ENDED=`ended`,e.TIMEUPDATE=`timeupdate`,e}({});var p=class{bufferInfo={length:0};updateBuffer(e,t){let n=0;for(;e.start(n)>t||t>e.end(n);)n+=1;let r=e.start(n);this.bufferInfo={length:e.end(n)-r}}},m=class extends t{tech=new p;get buffer(){return this.tech.bufferInfo}init(){return Promise.resolve(void 0)}attachMedia(e){super.attachMedia(e),this.registerListeners()}destroy(){this.unregisterListeners(),this.videoEl&&(this.videoEl.src=``,this.videoEl.load()),this.detachMedia()}load(e){if(!this.videoEl)throw new c(`videoEl`);this.videoEl.src=e}play(){if(!this.videoEl)throw new c(`videoEl`);return this.videoEl.play()}pause(){if(!this.videoEl)throw new c(`videoEl`);return this.videoEl.pause()}seekTo(){throw Error(`Method not implemented.`)}registerListeners(){if(!this.videoEl)throw new c(`videoEl`);this.eventHandlers={onLoadstart:()=>{this.emit(n.LOADING)},onCanplay:()=>{this.emit(n.READY)},onPlaying:()=>{this.emit(n.PLAYING)},onPause:()=>{this.emit(n.PAUSED)},onSeeking:()=>{this.emit(n.SEEKING)},onWaiting:()=>{this.emit(n.BUFFERING)},onEnded:()=>{this.emit(n.ENDED)},onTimeupdate:()=>{if(!this.videoEl)throw new c(`videoEl`);this.tech.updateBuffer(this.videoEl.buffered,this.videoEl.currentTime),this.emit(n.TIMEUPDATE)}},this.videoEl.addEventListener(f.LOADSTART,this.eventHandlers.onLoadstart),this.videoEl.addEventListener(f.CANPLAY,this.eventHandlers.onCanplay),this.videoEl.addEventListener(f.PLAYING,this.eventHandlers.onPlaying),this.videoEl.addEventListener(f.PAUSE,this.eventHandlers.onPause),this.videoEl.addEventListener(f.SEEKING,this.eventHandlers.onSeeking),this.videoEl.addEventListener(f.WAITING,this.eventHandlers.onWaiting),this.videoEl.addEventListener(f.ENDED,this.eventHandlers.onEnded),this.videoEl.addEventListener(f.TIMEUPDATE,this.eventHandlers.onTimeupdate)}unregisterListeners(){!this.videoEl||!this.eventHandlers||(this.videoEl.removeEventListener(f.LOADSTART,this.eventHandlers.onLoadstart),this.videoEl.removeEventListener(f.CANPLAY,this.eventHandlers.onCanplay),this.videoEl.removeEventListener(f.PLAYING,this.eventHandlers.onPlaying),this.videoEl.removeEventListener(f.PAUSE,this.eventHandlers.onPause),this.videoEl.removeEventListener(f.SEEKING,this.eventHandlers.onSeeking),this.videoEl.removeEventListener(f.WAITING,this.eventHandlers.onWaiting),this.videoEl.removeEventListener(f.ENDED,this.eventHandlers.onEnded),this.videoEl.removeEventListener(f.TIMEUPDATE,this.eventHandlers.onTimeupdate),this.eventHandlers=null)}};function h(e){switch(e){case`native`:return new m;case`dash`:return new s;case`hls`:return new d;case`unknown`:throw Error(`Unsupported player type`)}}var g=class{videoEl;instance=null;constructor(e){this.videoEl=e,this.setCurrentPlaybackState(n.IDLE)}logBufferInfo=i(()=>{console.info(`currentBufferInfo:`,this.instance?.buffer)},1e3);currentPlaybackState=n.IDLE;setCurrentPlaybackState(e){if(this.currentPlaybackState===n.TIMEUPDATE){this.logBufferInfo();return}this.currentPlaybackState!==e&&(this.currentPlaybackState=e,console.info(`currentPlaybackState:`,this.currentPlaybackState))}async load(e){if(!e){this.instance&&this.instance.destroy(),this.setCurrentPlaybackState(n.IDLE);return}let t=await r(e);this.instance=h(t),this.instance&&(this.instance.init(),this.instance.attachMedia(this.videoEl),this.instance.load(e),this.instance.play(),this.instance.emitter.on(`playbackEvent`,e=>{this.setCurrentPlaybackState(e)}))}destroy(){this.instance&&(this.instance.destroy(),this.instance.emitter.off(`playbackEvent`)),this.setCurrentPlaybackState(n.IDLE)}},_=document.getElementById(`root-video`),v=document.getElementById(`select-video`),y=new g(_);v.addEventListener(`change`,b);function b(e){let t=e.target.value;y.destroy(),y.load(t)}